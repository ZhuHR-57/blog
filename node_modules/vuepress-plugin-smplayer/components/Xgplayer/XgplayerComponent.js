import Xgplayer from "./Xgplayer";
import Vue from "vue";
import merge from "ts-deepmerge";
export default Vue.extend({
    props: {
        src: {
            type: Object,
            required: true,
        },
        on: {
            type: Object,
            default: () => XGPLAYER.on,
            required: false,
        },
        width: {
            type: String,
            default: XGPLAYER.width,
            required: false,
        },
        height: {
            type: Array,
            default: () => XGPLAYER.height,
            required: false,
        },
    },
    render() {
        return (<div class="smplayer">
        <div ref="sbplayer" style={`width: ${this.width}`}/>
      </div>);
    },
    data() {
        return {
            player: {},
        };
    },
    async mounted() {
        let on = merge(XGPLAYER.on, this.on);
        let src = {
            ...merge(XGPLAYER.src, this.src),
            el: this.$refs.sbplayer,
        };
        this.player = new Xgplayer(src);
        await this.player.InitPlayer();
        this.player.AddOnEvent(on);
    },
    beforeDestroy() {
        this.player?.DestroyPlayer();
    },
});
