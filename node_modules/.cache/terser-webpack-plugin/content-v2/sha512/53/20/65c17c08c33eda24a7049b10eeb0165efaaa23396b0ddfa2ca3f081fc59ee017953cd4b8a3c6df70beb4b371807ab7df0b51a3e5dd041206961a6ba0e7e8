{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{494:function(t,s,a){\"use strict\";a.r(s);var n=a(41),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"blockquote\",[a(\"p\",[t._v(\"字符咋存？utf8 咋编码？string 啥结构？\")]),t._v(\" \"),a(\"p\",[t._v(\"form：\"),a(\"a\",{attrs:{href:\"https://space.bilibili.com/567195437\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"幼麟实验室\"),a(\"OutboundLink\")],1)])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"字符咋存\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#字符咋存\"}},[t._v(\"#\")]),t._v(\" 字符咋存❓\")]),t._v(\" \"),a(\"p\",[t._v(\"同样是二进制存储，通过\"),a(\"strong\",[t._v(\"编码\")]),t._v(\"（指定特定 01 排列顺序为某一字符）如常见的 ASCII、GBK、UTF-8\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"utf8咋编码\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#utf8咋编码\"}},[t._v(\"#\")]),t._v(\" utf8 咋编码❓\")]),t._v(\" \"),a(\"p\",[t._v(\"由上面的的问题我们知道了，存储字符本质就是\"),a(\"strong\",[t._v(\"保存编码\")])]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"常见的两种保存编码的方式\")]),t._v(\" \"),a(\"ol\",[a(\"li\",[t._v(\"定长编码\")]),t._v(\" \"),a(\"li\",[t._v(\"变成编码\")])])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"定长编码\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#定长编码\"}},[t._v(\"#\")]),t._v(\" 定长编码\")]),t._v(\" \"),a(\"p\",[t._v(\"不管长短都都按\"),a(\"strong\",[t._v(\"最长的编码\")]),t._v(\"，可以看出非常的\"),a(\"strong\",[t._v(\"浪费内存\")]),t._v(\"，如下图\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://sjc04pap001files.storage.live.com/y4mu9YO6bkER_bJmfbJ1ZGdqctEuGDVrC97PyEVdAYFLocRAGO93RYBniQBJXs6P8syMzGvTtUn3PVhBlQI_gxkPb3o1Y-G9-1goZIoS5TVRaDVM9CWfeRZPuJvGUCE9l9ePp59eFoxeshRLSdOAq7Xw2hZAdd0tM-49mugKuuRsvqyy6qFs1W8Cw0YVIQOT-4M?width=660&height=280&cropmode=none\",alt:\"屏幕截图 2023-05-31 153517.png\"}})]),t._v(\" \"),a(\"h3\",{attrs:{id:\"变成编码\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#变成编码\"}},[t._v(\"#\")]),t._v(\" 变成编码\")]),t._v(\" \"),a(\"p\",[t._v(\"根据特定的\"),a(\"strong\",[t._v(\"前缀编号\")]),t._v(\"来存储，如下图\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://sjc04pap001files.storage.live.com/y4mlua0U3otyFUP1Nr16eISkZ9torra7R8uenC_6Z5_WXBgnMTKkJmJDEwSxKgypocQrpcJWUkSdzWnLjARD2WfhQdjQkq-yVDSA9F0-0-VZGHCppWZkiAYcAIVGH4NK6QeYlbfu_3ny5vd4l8KBa32qOegqy5U1oM4z6_2PIZQmRfYBlM__rXgsStXJ-NXtMVO?width=660&height=246&cropmode=none\",alt:\"\"}})]),t._v(\" \"),a(\"p\",[a(\"code\",[t._v(\"小练习\")])]),t._v(\" \"),a(\"table\",[a(\"thead\",[a(\"tr\",[a(\"th\",[t._v(\"字符\")]),t._v(\" \"),a(\"th\",[t._v(\"十进制\")]),t._v(\" \"),a(\"th\",[t._v(\"二进制\")]),t._v(\" \"),a(\"th\",[t._v(\"最终存储\")])])]),t._v(\" \"),a(\"tbody\",[a(\"tr\",[a(\"td\",[t._v(\"e\")]),t._v(\" \"),a(\"td\",[t._v(\"101\")]),t._v(\" \"),a(\"td\",[t._v(\"1100101\")]),t._v(\" \"),a(\"td\",[a(\"strong\",[t._v(\"0\")]),t._v(\"1100101\")])]),t._v(\" \"),a(\"tr\",[a(\"td\",[t._v(\"世\")]),t._v(\" \"),a(\"td\",[t._v(\"19990\")]),t._v(\" \"),a(\"td\",[t._v(\"0100111000010110\")]),t._v(\" \"),a(\"td\",[a(\"strong\",[t._v(\"1110\")]),t._v(\"0100 \"),a(\"strong\",[t._v(\"10\")]),t._v(\"111000 \"),a(\"strong\",[t._v(\"10\")]),t._v(\"010110\")])])])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"总结\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#总结\"}},[t._v(\"#\")]),t._v(\" 总结\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[t._v(\"在 Go 语言中\"),a(\"strong\",[t._v(\"默认\")]),t._v(\"采用的就是 UTF-8 的编解码方式。\")])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"字符集 + 编码方式 => 正确存储字符\")])])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"string啥结构\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#string啥结构\"}},[t._v(\"#\")]),t._v(\" string 啥结构❓\")]),t._v(\" \"),a(\"p\",[t._v(\"核心问题就是：“如何判断字符\"),a(\"strong\",[t._v(\"结束\")]),t._v(\"”？\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[t._v(\"C 语言是有 '\\\\0' 的特定标识符\")])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"Go 语言中采用的是：data + len （\"),a(\"strong\",[t._v(\"16 字节\")]),t._v(\"）\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-go line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-go\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"type\")]),t._v(\" StringHeader \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"struct\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    Data \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"uintptr\")]),t._v(\"\\n    Len  \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"int\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),a(\"br\")])])])]),t._v(\" \"),a(\"p\",[a(\"code\",[t._v(\"注意\")])]),t._v(\" \"),a(\"ol\",[a(\"li\",[a(\"p\",[t._v(\"在 Go 语言中，编译器会将字符串内容放入只读内存段，所以\"),a(\"strong\",[t._v(\"不允许修改\")])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"字符串变量可以\"),a(\"strong\",[t._v(\"共用底层字符串内容\")])])])]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://sjc04pap001files.storage.live.com/y4m4_l1itd24F0e2R7bcsNWoxi-Bh1NxIrgMs0Ysy-Gvv9B5y5Y8s6S5P6IGzneF3LYw3vO_Kx_jqf3htrXf9vO6S0IYSpcrMVV9q9w59ly1sxf8mHTqn4l2HnszZ6gPBke1nHRRsGc3RHRflBUKmZmNRdRQQLdjBbGDG8yDzeZUUbgrXBrEbmkDww5Y8foEHXp?width=660&height=199&cropmode=none\",alt:\"\"}})]),t._v(\" \"),a(\"ol\",{attrs:{start:\"3\"}},[a(\"li\",[a(\"p\",[t._v(\"非要修改\")]),t._v(\" \"),a(\"ol\",[a(\"li\",[t._v(\"可以重新赋值\")])]),t._v(\" \"),a(\"div\",{staticClass:\"language-go line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-go\"}},[a(\"code\",[t._v(\"s1 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"hello\"')]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"2\"}},[a(\"li\",[t._v(\"强制类型转换为 slice，原理是重新分配内存并拷贝原来字符串内容\")])]),t._v(\" \"),a(\"div\",{staticClass:\"language-go line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-go\"}},[a(\"code\",[t._v(\"bs \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"byte\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"s1\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\nbs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token char\"}},[t._v(\"'o'\")]),t._v(\"\\nfmt\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Printf\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"%c\\\\n\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"bs\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\")])])])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"长度和占用空间\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#长度和占用空间\"}},[t._v(\"#\")]),t._v(\" 长度和占用空间\")]),t._v(\" \"),a(\"p\",[t._v(\"在 Go 语言中，一个 UTF-8 编码的字符可能由 1 到 4 个字节组成，因此字符串的长度和占用的内存空间并不一定相同。\")])])}),[],!1,null,null,null);s.default=r.exports}}]);","extractedComments":[]}